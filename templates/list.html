{% extends 'base.html' %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canditate List</title>
</head>
<body>
    {% block content %}
    <h2>Search Candidates</h2>
    <form method="GET" action=".">
    <input type="text" name="q" value="{{ query }}" placeholder="Search by name, email, or skill">
    <button type="submit">Search</button>
    </form>
    <hr>

    <h2>All Candidates</h2>
    <ul>
    {% for candidate in candidates %}
        <li>
            <strong>{{candidate.name}}</strong> 
            <p>{{candidate.skills|default:"No skills added"}}</p> 
            <a href="{{candidate.resume.url}}"download>Download Resume</a>
        {% if candidate.profile_picture %}
                <br>
                <img src="{{ candidate.profile_picture.url }}" width="100">
            {% endif %}

        <a href="{% url 'edit_candidate' candidate.pk %}">Edit</a>
        <form method="POST" action="{% url 'delete_candidate' candidate.pk %}">
        {% csrf_token %}
        <button type="submit" onclick="return confirm('Are you sure you want to delete this candidate?')">Delete</button>
        </form>    
        </li>
    {% empty %}
        <li>No candidates found.</li>
        
    {% endfor %}
    <a href="{% url 'create_candidate' %}">Add New Candidate</a>
    </ul>
    {% endblock %}
</body>
</html>